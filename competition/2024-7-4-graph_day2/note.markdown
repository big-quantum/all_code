*create:2024-7-4*
# D2笔记

## 上午比赛

### T1

#### 考场思路
前半段正确，**预处理素数**，将**每个数拆分成素数的乘积**
后半段 直接暴力枚举每种可能性，求出答案
#### 正解
后半段考虑$gcd(a, b) = 1$的性质，可得$a,b$不含公因数，由此联想到将含有相同公因数的数打包成一个块，对处理好的每个块进行全排
#### 实现
所以：
$$ans = 2^k - 2$$
其中$k$为块的个数，$-2$是因为题目中要求集合非空
##### 如何求解块的个数
涉及知识：图，并查集
* 将每个数的公因数做标记，标记内容是数
* 如果遇到有标记的公因数，将这个数链接到标记上，并更新标记
* 用并查集实现链接

### T2 [ABC209E] Shiritori

#### 考场思路
先考虑用map实现，实现不了跳过做T3
回头想到将**前三个字母和后三个字母连边**，来不及
#### 正解
连边后构成一个图，存在自环
对其中的点有如下讨论：
* 一个点没有出度，则说这个点的人必败(必败点)
* 一个点连了必败态的点，这个点必胜
* 一个点连的全是必胜点，这个点必败
* 其余情况都是平局
* **注意**：这里的状态指的是对说这个单词的人而言必败/必胜
#### 实现
反向建图，跑拓扑序
建图时可以使用hash表，将三个字母的每一种情况进行映射，简化建图
##### 拓扑
* 扫图，对每个点计算出入度
* 寻找入度为零的点，加入队列
* 取出队头，赋予拓扑序，将与它相连的点的入度减一
* 重复2、3步，直到所有点都赋予拓扑序
* **重点：只适用于DGA(有向无环图)**


**以下摘自https://www.luogu.com.cn/article/47nxur7z**
有环是不一定平局的，分析一下。

（正向图中）在一个环里，一方说完了一个单词，如果对方可以走到必胜态，肯定会走处环使得自己胜而不是平局。但是如果这个环没有向外连边或连向的都是必败态，那么就是平局。

那么在反向图中，我们在**遍历一个必胜的点的出边**时，**不必**在**后继的入度为零**时才让它入队，**直接把它的状态转移为必败**并入队。若是遍历一个必败的点的出边，正常拓扑即可。

### T3 CF852D Exploration plan
#### 闲谈
~~题面是最抽象的~~
#### 考场思路
输出$-1$骗分，15pts
#### 正解
#### 实现
### T4
#### 考场思路
#### 正解
#### 实现
## 下午课程

